<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core">

	<h1 class="text-center">#{pMsg['cart.subject']}</h1>
	<div class="container">
		<h:form id="orderTable">
			<table>
				<tr>
					<td><h:outputLabel value="Họ và tên:" /></td>
					<td><h:inputText id="nameCus"
							value="#{orderBean.order.customerName}"
							validator="InputTextEmptyValidator" /> <h:message for="nameCus"
							style="color: red;" /></td>
				</tr>
				<tr>
					<td><h:outputLabel value="Địa chỉ:" /></td>
					<td><h:inputText id="addressCus"
							value="#{orderBean.order.customerAddress}" required="true" /> <h:message
							for="addressCus" style="color: red;" /></td>
				</tr>
				<tr>
					<td><h:outputLabel value="Số điện thoại:" /></td>
					<td><h:inputText id="phoneCus"
							value="#{orderBean.order.customerPhone}" required="true" /> <h:message
							for="phoneCus" style="color: red;" /></td>
				</tr>
				<tr>
					<td><h:outputLabel value="Email:" /></td>
					<td><h:inputText id="emailCus" validator="EmailValidator"
							value="#{orderBean.order.customerEmail}" required="true" /> <h:message
							for="emailCus" style="color: red;" /></td>
				</tr>
				<tr>
					<td><h:outputLabel value="Ngày order:" /></td>
					<td><h:inputText id="dateOrder" converter="DateConverter" 
							value="#{orderBean.order.orderDate}" required="true" />
							 <h:message
							for="dateOrder" style="color: red;" /></td>
				</tr>
				<tr>
					<td><h:commandButton value="Đặt hàng"
							action="#{orderBean.performOrder()}" styleClass="btn btn-success">
							<f:ajax execute="orderTable" render="cartTable bag_value @form" />
						</h:commandButton></td>
				</tr>

			</table>

		</h:form>

		<h:dataTable id="cartTable" var="cart" value="#{cartBean.carts}"
			styleClass="table">
			<h:column>
				<f:facet name="header">#{pMsg['product.id']}</f:facet>
					
					<h:inputText id="addProductInput" value="#{cart['productId']}" valueChangeListener="#{cartBean.addItemToCartByProduct()}" >
					     <f:ajax event="change" execute="addProductInput" render="cartTable bag_value addProductInput" />
					</h:inputText>
			</h:column>
			<h:column>
				<f:facet name="header">#{pMsg['product.name']}</f:facet>
					#{cart['productName']}
			</h:column>
			<h:column>
				<f:facet name="header">#{pMsg['product.price']}</f:facet>
					#{cart['productPrice']}
			</h:column>
			<h:column>
				<f:facet name="header">#{pMsg['cart.count']}</f:facet>
					#{cart['count']}
			</h:column>
			<h:column>
				<f:facet name="header"></f:facet>
			</h:column>
		</h:dataTable>

		<!-- <h:form id="addProductForm">
			<h3>Thêm sản phẩm</h3>
			<table>
				<tr>
					<td><h:outputLabel value="Nhập id sản phẩm:" /></td>
					<td><h:inputText id="addProductInput" value="#{cartBean.productId}" /></td>
				</tr>
				<tr>
					<td><h:commandButton
							action="#{cartBean.addItemToCartByProduct()}" value="Thêm"
							styleClass="btn btn-primary">
							<f:ajax execute="addProductInput" render="cartTable bag_value" />
						</h:commandButton></td>
				</tr>
			</table>
		</h:form> -->
	</div>
</ui:composition>